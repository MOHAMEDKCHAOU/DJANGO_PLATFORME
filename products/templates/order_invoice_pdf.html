<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Invoice #{{ order.id }}</title>
    <style>
        body { font-family: Arial, sans-serif; font-size: 14px; margin: 30px; color: #343a40; }
        h1 { color: #007bff; }
        h3 { color: #343a40; margin-top: 30px; }
        .header, .footer { text-align: center; }
        .header p, .footer p { margin: 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table, th, td { border: 1px solid #dee2e6; }
        th, td { padding: 12px; text-align: left; }
        th { background-color: #f8f9fa; }
        .text-right { text-align: right; }
        .total { font-size: 16px; font-weight: bold; }
        .note { margin-top: 30px; padding: 15px; border: 1px solid #007bff; background-color: #e9f7ff; }
        .product-img { max-width: 60px; max-height: 60px; object-fit: contain; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Invoice #{{ order.id }}</h1>
        <p>Order Date: {{ order.created_at|date:"M d, Y H:i" }}</p>
    </div>

    <h3>Customer Information</h3>
    <p><strong>Name:</strong> {{ order.first_name }} {{ order.last_name }}</p>
    <p><strong>Email:</strong> {{ order.email }}</p>
    <p><strong>Phone:</strong> {{ order.phone }}</p>
    <p><strong>Address:</strong> {{ order.address }}</p>

    <h3>Order Details</h3>
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order_items %}
            <tr>
                <td>
                    {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="product-img">
                    {% endif %}
                    {{ item.product.name }}
                </td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.price }} TND</td>
                <td>{{ item.total_price }} TND</td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="3" class="text-right total">Total:</td>
                <td class="total">{{ total_price }} TND</td>
            </tr>
        </tbody>
    </table>

    <div class="note">
        <p><strong>Payment Method:</strong> Payment on Delivery (Cash or Card)</p>
        <p><strong>For any questions:</strong> Call +216 55510082</p>
        <p><strong>Delivery Location:</strong> {{ order.address }}</p>
    </div>

    <div class="footer">
        <p>Thank you for your order!</p>
    </div>
</body>
</html>
